<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <link rel="icon" href="../../img/favicon.ico" type="image/x-icon">
  <link rel="stylesheet" href="../../../css/style-general.css">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sesión 24</title>
  <!-- Formatear code. Agrega la hoja de estilo para el tema oscuro (por ejemplo, Dracula)-->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.7.2/styles/dracula.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.7.2/highlight.min.js"></script>
  <script>document.addEventListener('DOMContentLoaded', (event) => { hljs.highlightAll(); })</script>
</head>

<body>
  <nav class="nav heartbeat">
    <input type="checkbox" id="toggle-menu">
    <label for="toggle-menu" class="icono-hamburguesa"><span></span></label>  
    <ul>
      <li>Sesión 10</li>
      <li><a href="../sesion10/index.html#and-or">And/Ord</a> </li>
      <li><a href="../sesion10/index.html#switch">Switch</a> </li>
      <li><a href="../sesion10/index.html#ciclo-for">For</a> </li>
      <li><a href="../sesion10/index.html#for-of-in">For of/in</a> </li>
      <li><a href="../sesion10/index.html#while">While</a> </li>
      <li>Sesión 11</li>
      <li><a href="../sesion11/index.html#while-ejer-multiplos">While Ejer</a> </li>
      <li><a href="../sesion11/index.html#functions">Functions</a> </li>
      <li><a href="../sesion11/index.html#function-anonima">Function Anon</a> </li>
      <li><a href="../sesion11/index.html#function-arrow">Function Arrow</a> </li>
      <li><a href="../sesion11/index.html#arrays-ejer">Arrays</a> </li>
      <li><a href="../sesion11/index.html#for">For</a> </li>
      <li><a href="../sesion11/index.html#foreach">Foreach</a> </li>
      <li><a href="../sesion11/index.html#filter">Filter</a> </li>
      <li>Sesión 12</li>
      <li><a href="../sesion12/index.html#filter-ejer">Filter Ejer</a> </li>
      <li><a href="../sesion12/index.html#promise">Promise</a> </li>
      <li><a href="../sesion12/index.html#async-await">Async/Await</a> </li>
      <li>Sesión 13</li>
      <li><a href="../sesion13/index.html#promise-ejer">Promise Ejercicio</a> </li>
      <li><a href="../sesion13/index.html#import-export">Import / Export</a> </li>
      <li><a href="../sesion13/index.html#mod1-ppo">POO</a> </li>
      <li>Sesión 14</li>
      <li><a href="../sesion14/index.html#prototipos">Prototipos</a> </li>
      <li>Sesión 15</li>
      <li><a href="../sesion14/index.html#herencia">Herencia</a> </li>
      <li><a href="../sesion15/index.html#herencia-ejer">Herencia Ejercicios</a> </li>
      <li><a href="../sesion15/index.html#poliformismo">Poliformismo</a> </li>
      <li>Sesión 16</li>
      <li><a href="../sesion16/index.html#arrays-metodos">Array Métodos</a> </li>
      <li><a href="../sesion16/index.html#arrays-fill">Array / fill() </a></li>
      <li><a href="../sesion16/index.html#arrays-foreach">Array / forEach()</a> </li>
      <li><a href="../sesion16/index.html#arrays-filter">Array / filter()</a> </li>
      <li><a href="../sesion16/index.html#arrays-find">Array / find()</a> </li>
      <li><a href="../sesion16/index.html#arrays-map">Array / map()</a> </li>
      <li><a href="../sesion16/index.html#arrays-sort">Array / sort()</a> </li>
      <li><a href="../sesion16/index.html#arrays-tosorted">Array / toSorted()</a> </li>
      <li><a href="../sesion16/index.html#tarea-comparador">Tarea comparador</a> </li>
      <li>Sesión 17</li>
      <li><a href="../sesion17/index.html#arrays-some">Array / some()</a> </li>
      <li><a href="../sesion17/index.html#arrays-filter-include">Array / filter() + include()</a> </li>
      <li><a href="../sesion17/index.html#arrays-every">Array / every()</a> </li>
      <li><a href="../sesion17/index.html#arrays-concat">Array / concat()</a> </li>
      <li><a href="../sesion17/index.html#arrays-include">Array / include()</a> </li>
      <li><a href="../sesion17/index.html#arrays-join">Array / join()</a> </li>
      <li><a href="../sesion17/index.html#arrays-reduce">Array / reduce()</a> </li>
      <li><a href="../sesion17/index.html#arrays-index-of">Array / indexOf()</a> </li>
      <li><a href="../sesion17/index.html#arrays-find-index">Array / findIndex()</a> </li>
      <li><a href="../sesion17/index.html#arrays-shift">Array / shift()</a> </li>
      <li><a href="../sesion17/index.html#arrays-unshift">Array / unshift()</a> </li>
      <li><a href="../sesion17/index.html#arrays-reverse">Array / reverse()</a> </li>
      <li><a href="../sesion17/index.html#arrays-toReverse">Array / toReverse()</a> </li>
      <li><a href="../sesion17/index.html#arrays-splice">Array / splice()</a> </li>
      <li>Sesión 18</li>
      <li><a href="../sesion18/index.html#arrays-flat">Array / flat()</a> </li>
      <li><a href="../sesion18/index.html#arrays-isArray">Array / isArray()</a> </li>
      <li><a href="../sesion18/index.html#arrays-from">Array / from()</a> </li>
      <li><a href="../sesion18/index.html#rest-operador">Operador Rest</a> </li>
      <li><a href="../sesion18/index.html#spread-operador">Operador Espread</a> </li>
      <li>Sesión 19</li>
      <li><a href="../sesion18/index.html#pilas">Pilas</a> </li>
      <li><a href="../sesion19/index.html#pilas-ejer">Pilas Ejercicios</a> </li>
      <li><a href="../sesion19/index.html#colas">Colas</a> </li>
      <li><a href="../sesion19/index.html#listas-enlazadas">Listas enlazadas</a> </li>
      <li><a href="../sesion19/index.html#tarea-lista-enlazada">Tarea listas enlazadas</a> </li>
      <li>Sesión 20</li>
      <li><a href="../sesion20/index.html#lista-enlazada-ejer">Lista enlazada ejercicios</a></li>
      <li><a href="../sesion20/index.html#arbol-binario">Árbol binario</a></li>
      <li>Sesión 21</li>
      <li><a href="../sesion21/index.html#arboles-ejercicios">Árbol binario ejercicios</a></li>
      <li><a href="../sesion21/index.html#grafos">Grafos</a></li>
      <li><a href="../sesion21/index.html#grafos-ejer">Grafos ejercicios</a></li>
      <li><a href="../sesion21/index.html#grafos-bfs">Grafos / BFS</a></li>
      <li><a href="../sesion21/index.html#grafos-dfs">Grafos / DFS</a></li>
      <li><a href="../sesion21/index.html#algoritmo-busqueda-lineal">Algoritmos / búsqueda lineal</a></li>
      <li>Sesión 22</li>
      <li><a href="../sesion22/index.html#algoritmo-busqueda-lineal">Algoritmos / Búsqueda binaria</a></li>
      <li><a href="../sesion22/index.html#algoritmo-quicksort">Algoritmos / Quicksort</a></li>
      <li><a href="../sesion22/index.html#algoritmo-mergesort">Algoritmos / MergeSort</a></li>
      <li>Sesión 23</li>
      <li><a href="../sesion23/index.html#algoritmo-bubble-sort">Algoritmos / Bubble Sort</a></li>
      <li><a href="../sesion23/index.html#algoritmo-select-sort">Algoritmos / Select Sort</a></li>
      <li><a href="../sesion23/index.html#algoritmo-insertion-sort">Algoritmos / Insertion Sort</a></li>
      <li>Sesión 24</li>
      <li><a href="../sesion24/index.html#algoritmo-radix-sort">Algoritmos / Radix Sort</a></li>
      <li><a href="../sesion24/index.html#json-web-token">Json Web Token - Parte 1</a></li>
      <li>Sesión 25</li>
      <li><a href="../sesion25/index.html#json-web-token-dos">Json Web Token - Parte 2</a></li>
      <li><a href="../sesion25/index.html#crud-express-mongodb-uno">CRUD / Express y MongoDB - Parte 1</a></li>
      <li>Sesión 26</li>
      <li><a href="../sesion26/index.html#crud-express-mongodb-dos">CRUD / Express y MongoDB - Parte 2</a></li>
      <li>Sesión 27</li>
      <li><a href="../sesion27/index.html#crud-express-mongodb-tres">CRUD / Express y MongoDB - Parte 3</a></li>
      <li>Sesión 28</li>
      <li><a href="../sesion28/index.html#crud-express-mysql-uno">CRUD / Express y MySql - Parte 1</a></li>
      <li>Sesión 29</li>
      <li><a href="../sesion29/index.html#crud-express-mysql-dos">CRUD / Express y MySql - Parte 2</a></li>
      <li>Sesión 30</li>
      <li><a href="../sesion30/index.html#react-uno">React - Parte 1</a></li>
      <li>Sesión 31</li>
      <li><a href="../sesion31/index.html#react-dos">React - Parte 2</a></li>
      <li><a href="../sesion31/index.html#react-vite">React con Vite</a></li>
      <li><a href="../sesion31/index.html#react-ejer-card-one">React - Ejercicio Cards - Parte 1</a></li>
      <li>Sesión 32</li>
      <li><a href="../sesion32/index.html#react-ejer-card-dos">React - Ejercicio Cards - Parte 2</a></li>
      <li><a href="../sesion32/index.html#react-actividad">React - Actividad</a></li>
      <li>Sesión 33</li>
      <li><a href="../sesion33/index.html#react-hook">React - Hook</a></li>
      <li><a href="../sesion33/index.html#react-hook-use-state">React - Hook {useState}</a></li>
      <li><a href="../sesion33/index.html#react-hook-use-effect">React - Hook {useEffect}</a></li>
    </ul>
  </nav>
  <h1>SESIÓN 24</h1>
  <small class="fecha">12.04.2024 S24-M2</small>

  <article id="algoritmo-radix-sort">
    <h2>Algoritmos / Radix Sort</h2>
    <p>Radix Sort es un algoritmo de ordenación no comparativo que ordena enteros procesándolos por sus dígitos individuales, desde el dígito menos significativo hasta el más significativo. En cada iteración, los números se agrupan según el valor de un dígito específico, utilizando un sistema de "baldes" o "buckets". Es eficiente para ordenar números enteros, pero no es adecuado para ordenar objetos o cadenas alfabéticas.</p>
    <p><a href="https://www.youtube.com/watch?v=W_euZjKoHkM">Mira la teoría aquí</a></p>
    <p><a href="https://www.escuelafrontend.com/algoritmos-de-ordenacion-javascript#getdigit">o mira la ejecución, funcionamiento y explicación del código aquí</a></p>
    <pre class="dark">
      <div class="pre-head">
        <span class="tag js">js</span>
        <button class="copy-button">📋 Copiar código</button>
      </div>
      <code class="language-js">

// 
function getDigit(num, i) {
  // el valor absoluto permite que funcione con numeros negativos
return Math.floor(Math.abs(num) / Math.pow(10, i)) % 10;
}

function getNumberLength(num) {
  if (num < 10) return 1;
  return Math.floor(Math.log10(Math.abs(num))) + 1;
}

function longestDigitCount(nums) {
  let maxDigits = 0;
  for (let i = 0; i < nums.length; i++) {
    maxDigits = Math.max(maxDigits, getNumberLength(nums[i]));
  }
  return maxDigits;
}

function radixSort(nums){
  let L = longestDigitCount(nums);
  for(let i = 0; i < L; i++){
      let digitBoxes = Array.from({length: 10}, () => []);
      for(let j = 0; j < nums.length; j++){
          let digit = getDigit(nums[j],i);
          digitBoxes[digit].push(nums[j]);
      }
      nums = [].concat(...digitBoxes);
  }
  return nums;
}

// Comprobación 
const nums = [532, 123, 234, 643, 234, 1, 534, 654, 789, 432];
console.log("Array original:", nums);

const sortedNums = radixSort(nums);
console.log("Array ordenado:", sortedNums);

      </code>
    </pre> 

  </article>

  <article id="json-web-token">
    <h2>Json Web Token - Parte 1</h2>
    <img src="jwt-icon.png" alt="JsonWebTokenIcono">
    <p>JWT (JSON Web Token) es un estándar abierto basado en JSON que permite transmitir información de forma segura entre partes como un objeto. Este token es comúnmente utilizado para autenticar usuarios y compartir información de forma segura entre el cliente y el servidor. Consiste en tres partes codificadas en Base64: encabezado, carga útil y firma. El servidor genera el token al autenticar al usuario, y el cliente lo almacena y lo envía en cada solicitud posterior para acceder a recursos protegidos, permitiendo así mantener la sesión del usuario sin necesidad de almacenar información en el servidor.</p>
    <p>Primero crea un directorio</p>
    <p>Las extensiones <b>Visual Studio Code</b> a usar son: </p>
    <p><i>Thunder Client</i> y <i>Postman</i></p>
    <p><b>INICIANDO EL PROYECTO</b> en la ruta del directorio, en la terminal ejecuta</p>
    <pre class="dark">
      <div class="pre-head">
        <span class="tag js">terminal</span>
        <button class="copy-button">📋 Copiar código</button>
      </div>
      <code class="language-js">

// Inicializa un nuevo proyecto en node.js, da [enter] e ingresa los daros solicitados,
// como version, nombre, descripción, entry point, etc.
npm init

// o usa npm init -y para crear el proyecto y que tome todas las opciones por defecto
      </code>
    </pre> 
    <p>Ahora instalamos un servidor, en este caso <b>EXPRESS</b>, y la librería de <b>JWT(JsonWebToken)</b></p>
    <pre class="dark">
      <div class="pre-head">
        <span class="tag js">terminal</span>
        <button class="copy-button">📋 Copiar código</button>
      </div>
      <code class="language-js">

npm i express jsonwebtoken

      </code>
    </pre> 
    <p>Ahora en la raíz del proyecto crea un nuevo directorio llamado <b>config</b> y adicional crea un archivo llamado <b>app.js</b> </p>
    <p>Dentro del directorio que acabas de crear llamado <b><i>config</i></b> crea un archivo llamado <b>keys.js</b></p>
    <pre class="dark">
      <div class="pre-head">
        <span class="tag js">Estructura de carpetas</span>
        <button class="copy-button">📋 Copiar código</button>
      </div>
      <code class="language-js">

<b style="color: rgb(174, 50, 205)">config</b> // New
    <b style="color: rgb(174, 50, 205)">keys.js</b> // New
node_modules
<b style="color: rgb(174, 50, 205)">app.js</b> // New
package-lock.json
package.json

      </code>
    </pre> 
    <p>En este proyecto no se va a trabajar con módulos, se va usar <b>REQUIRE</b>. Por ello en nuestro <b>app.js</b> configuramos nuestro servidor de la siguiente manera:</p>
  
    <pre class="dark">
      <div class="pre-head">
        <span class="tag js">app.js</span>
        <button class="copy-button">📋 Copiar código</button>
      </div>
      <code class="language-js">

const express = require('express'); // Llamo la librería 'express'
const app = express(); // Se instancia la configuración de express para poder usar sus propiedades.

// Configuramos el puerto de conexión
app.listen(5000, () => {
  console.log('El servidor esta conectado en http://localhost:5000 ')
}); 

// ejecuta la aplicación con ' nodemon app ' 

      </code>
    </pre>

    <pre class="dark">
      <div class="pre-head">
        <span class="tag js">app.js</span>
        <button class="copy-button">📋 Copiar código</button>
      </div>
      <code class="language-js">

// Adicional mente podemos mostrar en pantalla algo como :
app.get('/', (req, res) => {
  res.send('Hola mundo');
});

// Guarda e ingresa a la ruta http://localhost:5000, 
//(desde la terminal [ctrl + clic], o desde el navegador ingresando 
// directamente la URL)
      </code>
    </pre>

    <h3>Configurando las KEYS</h3>
    <pre class="dark">
      <div class="pre-head">
        <span class="tag js">keys.js</span>
        <button class="copy-button">📋 Copiar código</button>
      </div>
      <code class="language-js">

module.exports = {
  key: 'clavesecreta2024';
}

      </code>
    </pre>

    <h3>Terminado de configurar 'app.js', primer parte </h3>
    <p>En esta primer parte configuramos que se este enviando por POST y se este generando el token, validando si los datos de ingreso son correctos</p>
    <pre class="dark">
      <div class="pre-head">
        <span class="tag js">app.js</span>
        <button class="copy-button">📋 Copiar código</button>
      </div>
      <code class="language-js">
const express = require('express'); // Llamo la librería 'express'
const app = express(); // Se instancia la configuración de express para poder usar sus propiedades.

// Area de trabajo
const jwt = require('jsonwebtoken');
const keys = require('./config/keys');

app.set('key', keys.key);
app.use(express.urlencoded({extended: false}));
app.use(express.json());

app.post('/login', (req, res) =>{
  if(req.body.usuario == 'admin' && req.body.pass == 'asd1234'){
    const payload = {
      check: true
    };
    const token = jwt.sign(payload, app.get('key'),{
      expiresIn: '3d'
    });
    res.json({msg: "Se encuentra logueado con el login", token: token})
  }else{
    res.json({msg: "El usuario y contraseña no son correctos"});
  }
});




// Configuramos el puerto de conexión
app.listen(5000, () => {
  console.log('El servidor esta conectado en http://localhost:5000 ')
}); 

// ejecuta la aplicación con ' nodemon app ' si sale un error con que no reconoce el comando 
// ejecuta npm install -g nodemon, para instalar nodemon de forma global.

// Podemos mostrar en pantalla algo como :
app.get('/', (req, res) => {
  res.send('Hola mundo 😎');
});

      </code>
    </pre>
    <p>Probando desde Postman, enviado los siguientes datos: </p>
    <pre class="dark">
      <div class="pre-head">
        <span class="tag js">POSTMAN</span>
        <button class="copy-button">📋 Copiar código</button>
      </div>
      <code class="language-js">

{
  "usuario" : "admin",
  "pass" : "asd1234"
}

      </code>
    </pre>
    <div class="nota">
      <span class="tag tag-nota">NOTA</span>
      <b>'usuario'</b> y <b>'pass'</b> salen de nuestra condición en <b><i>app.js</i></b>. Solo si la CONDICIÓN SE CUMPLE se genera el <b>"token".</b>
    </div>
    <p>Cuando los datos son correctos se genera el token:</p>
    <img src="jwt-token-ok.png" alt="">
    <p>De lo contrario, cuando no son correctos, no se genera el token y se muestra el mensaje de error:</p>
    <img src="jwt-token-error.png" alt="">
  
  
  </article>

  <footer>
    Bryan Hernández | Telento Tech DWFSV2-42 | 2024
  </footer>
  <script src="../../../js/js-general.js"></script>
  <script src="sesion24.js" type="module"></script>
</body>

</html>